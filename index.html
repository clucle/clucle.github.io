<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>clucle&#39;s blog</title>
  <meta name="author" content="Dujin Jung">
  
  <meta name="description" content="두찡의 일상">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="clucle&#39;s blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="clucle&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">clucle&#39;s blog</a></h1>
  <h2><a href="/">두찡의 프로그래밍</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-05-19T07:00:03.000Z"><a href="/2017/05/19/Retrofit-HTTP-Android/">2017-05-19</a></time>
      
      
  
    <h1 class="title"><a href="/2017/05/19/Retrofit-HTTP-Android/">Retrofit-HTTP-Android</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Retrofit 은 안드로이드와 자바에서 HTTP client 에서 REST API통신을 하기 위한 라이브러리이다. <a href="http://square.github.io/retrofit/" target="_blank" rel="external">공식 홈페이지</a>. 이번에는 간단한 node server와 android client 의 HTTP 통신을 하는 간단한 예제를 소개하려고 한다. 소스코드는 <a href="https://github.com/clucle/Android/tree/master/Retrofit_tutor" target="_blank" rel="external">link</a>를 첨부한다. <strong>server repository에는 node server가 들어있고, client repository에는 android client가 들어있다.</strong></p>
<p>이 글에서는 Server 보다는 Retrofit 에 집중 하므로 서버에 관한 내용은 간단하게만 소개한다.</p>
<h1 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h1><p>Server는 nodejs로 작성 할 필요는 없다. 단지 HTTP 통신을 확인하기 위한 소스이다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"></div><div class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</div><div class="line"></div><div class="line"><span class="comment">// parse JSON inputs</span></div><div class="line">app.use(bodyParser.json());</div><div class="line"><span class="comment">// parse URL encoded inputs</span></div><div class="line">app.use(bodyParser.urlencoded());</div><div class="line"></div><div class="line">app.set(<span class="string">'port'</span>, process.env.PORT || <span class="number">3000</span>);</div><div class="line"></div><div class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">	res.sendFile(__dirname + <span class="string">'/index.html'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.post(<span class="string">'/ping'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">	res.status(<span class="number">200</span>).send(<span class="string">"pong"</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.post(<span class="string">'/user/one'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">	<span class="keyword">if</span> (req.body.name == <span class="string">"clucle"</span>) &#123;</div><div class="line">		res.status(<span class="number">200</span>).send(&#123;<span class="attr">name</span>: <span class="string">'clucle'</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;);</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(req.body.name == <span class="string">"junsu"</span>) &#123;</div><div class="line">		res.status(<span class="number">200</span>).send(&#123;<span class="attr">name</span>: <span class="string">'junsu'</span>, <span class="attr">age</span>: <span class="number">25</span>&#125;);</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		res.status(<span class="number">404</span>).send(<span class="string">"ERROR"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.post(<span class="string">'/user/list'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">	res.status(<span class="number">200</span>).send(&#123;<span class="attr">users</span>: [</div><div class="line">		&#123;<span class="attr">name</span>: <span class="string">'clucle'</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;,</div><div class="line">		&#123;<span class="attr">name</span>: <span class="string">'junsu'</span>, <span class="attr">age</span>: <span class="number">25</span>&#125;</div><div class="line">	]&#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">http.createServer(app).listen(app.get(<span class="string">'port'</span>), <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'Express server listeneing on port '</span> + app.get(<span class="string">'port'</span>));</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>이 소스에서 중요한 부분은 app.post 라고 쓰여진 부분 중에서 /user/ 으로 접근하는 부분이다.</p>
<p>client 에서 user/one 으로 접근 할 때는 req.body.name 에 이름을 받아서 검색한다. body 는 json 형식으로 {“name”: “something”} 보내주면 파싱한다.</p>
<p>client 에서 user/list 으로 접근 할 때는 파라미터 없이 users 리스트를 전달해준다. body 는 json 형식으로 {“name”: “something”} 보내주면 파싱한다.</p>
<p>res.send(code) 에서 code 는 일반적으로 200번이 성공이고 400대가 넘어가면 관리자가 적용해둔 에러로 처리하고 client에서 200번에 왔을 때 통신을 처리하고, 에러코드가 넘어오면 에러처리를 해주면 된다.</p>
<h1 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h1><h1 id="1-gradle-setting"><a href="#1-gradle-setting" class="headerlink" title="1. gradle setting"></a>1. gradle setting</h1><ul>
<li>app의 build.gradle에 다음 소스를 추가한다. 우리가 주목해야 하는 부분은 아래와 같다. 이글의 작성 시점 2017-05-19의 최신 버전 2.3.0 버전을 사용하였다.<blockquote>
<p>compile ‘com.squareup.retrofit2:retrofit:2.3.0’<br>compile ‘com.squareup.retrofit2:converter-gson:2.3.0’</p>
</blockquote>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion 25</div><div class="line">    buildToolsVersion <span class="string">"25.0.3"</span></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.android_dev.clucle.retrofittutor"</span></div><div class="line">        minSdkVersion 18</div><div class="line">        targetSdkVersion 25</div><div class="line">        versionCode 1</div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">        <span class="built_in">test</span>InstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            minifyEnabled <span class="literal">false</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    compile fileTree(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</div><div class="line">    androidTestCompile(<span class="string">'com.android.support.test.espresso:espresso-core:2.2.2'</span>, &#123;</div><div class="line">        exclude group: <span class="string">'com.android.support'</span>, module: <span class="string">'support-annotations'</span></div><div class="line">    &#125;)</div><div class="line">    compile <span class="string">'com.android.support:appcompat-v7:25.3.1'</span></div><div class="line">    compile <span class="string">'com.android.support.constraint:constraint-layout:1.0.2'</span></div><div class="line">    compile <span class="string">'com.squareup.retrofit2:retrofit:2.3.0'</span></div><div class="line">    compile <span class="string">'com.squareup.retrofit2:converter-gson:2.3.0'</span></div><div class="line">    <span class="built_in">test</span>Compile <span class="string">'junit:junit:4.12'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="2-example"><a href="#2-example" class="headerlink" title="2. example"></a>2. example</h1><p>우선 통신을 하는 API를 정해서 미리 정의한다.</p>
<p>POST 명령으로 user/one을 실행하면 name을 인자로 줘서 User class에 맞는 json을 받는다. 주는 형식은 {“name”: name} 으로 전달된다</p>
<p>POST 명령으로 user/list를 실행하면 인자 없이 Users class에 맞는 json을 받는다.</p>
<p>@FormUrlEncoded는 json 인자를 서버에 보내줘야할 때 써준다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public interface RetrofitAPI &#123;</div><div class="line"></div><div class="line">    @POST(&quot;user/one&quot;)</div><div class="line">    @FormUrlEncoded</div><div class="line">    Call&lt;User&gt; getUser(</div><div class="line">            @Field(&quot;name&quot;) String name</div><div class="line">    );</div><div class="line"></div><div class="line">    @POST(&quot;user/list&quot;)</div><div class="line">    Call&lt;Users&gt; getUserList();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">public class User &#123;</div><div class="line">    private String name;</div><div class="line">    private int age;</div><div class="line"></div><div class="line">    public User(String name, int age) &#123;</div><div class="line">        this.name = name;</div><div class="line">        this.age = age;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getName() &#123;</div><div class="line">        return name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int getAge() &#123;</div><div class="line">        return age;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setName(String name) &#123;</div><div class="line">        this.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setAge(int age) &#123;</div><div class="line">        this.age = age;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return (&quot;name : &quot; + name + &quot; age : &quot; + age);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public class Users &#123;</div><div class="line">    public List&lt;User&gt; users;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>정의해둔 HTTP API 통신을 하기 위해서 Retrofit 의 Builder로 서버와 통신한다. 이를 편하게 하기 위해서 RetrofitHelper를 제작한다. 아래 url과 port는 내 로컬 pc의 ip와 node서버를 열어둔 포트이다. getInstance() Method를 통해 어디서나 통신을 할 수 있도록 만들고 retrofit.create에서 위에서 만든 API를 넣어주면 서버와 통신한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">public class RetrofitHelper &#123;</div><div class="line"></div><div class="line">    // server address, port</div><div class="line">    private final static String url = &quot;http://192.168.0.22&quot;;</div><div class="line">    private final static int port = 3000;</div><div class="line"></div><div class="line">    private static Retrofit retrofit;</div><div class="line"></div><div class="line">    public static RetrofitAPI getInstance() &#123;</div><div class="line">        if (retrofit == null) &#123;</div><div class="line">            retrofit = new Retrofit.Builder()</div><div class="line">                    .baseUrl(url + &quot;:&quot; + port)</div><div class="line">                    .addConverterFactory(GsonConverterFactory.create())</div><div class="line">                    .build();</div><div class="line">        &#125;</div><div class="line">        return retrofit.create(RetrofitAPI.class);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static boolean returnNetworkState(Context context) &#123;</div><div class="line">        ConnectivityManager connectivityManager =</div><div class="line">                ((ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE));</div><div class="line">        return connectivityManager.getActiveNetworkInfo() != null &amp;&amp;</div><div class="line">                connectivityManager.getActiveNetworkInfo().isConnected();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="3-start-retrofit"><a href="#3-start-retrofit" class="headerlink" title="3. start retrofit"></a>3. start retrofit</h1><p>만들어둔 RetrofitHelper와 API로 통신하는 법이다. RetrofitHelper.getInstance().에서 Interface에 정의해둔 함수명을 적는다.</p>
<p>RetrofitHelper.getInstance().<strong>Method(parameter)</strong>.enque(new Callback&lt;<strong>인터페이스에서 정한 받을 타입</strong>&gt;(){  <strong>여기에서 엔터 치고 명령어들을 override한다.</strong> })</p>
<p>그러면 onResponse와 onFailure에 나오는데 onResponse는 서버에서 어떤 값이 넘어온 상태이고 onFailure는 서버에서 값이 넘어오지 않은 상태이거나, 너무 많은 요청이 들어간 등 서버에서 에러가 난 상태이다.</p>
<p>onResponse에서 code가 에러코드가 아니지 체크하고 <strong>response.code() == 200</strong></p>
<p>response.body()는 내부에 json파일이 들어있는지 확인한다 <strong>response.body() != null</strong></p>
<p>만약 Model Class 여기서는 User 에 getter를 만들어 두었으면 json형식의 파일을 맞춰서 받으면 자동으로 파싱되서 들어간다. 잘 모르겠으면 소스를 위에 링크한 소스를 참고하면 편할 것이다.</p>
<p>updateUserList에서는 updateUser와 다르게 json이 배열 형식으로 오는데 받는 json 형식이 현재 {users: [{“name”:”name1”,”age”:”age1”},{“name”:”name2”,”age”:”age2”}]}<br>배열에 담겨서 온다. 이럴 때는 response.body().users로 해주면 json의 users에 담긴 배열을 받아와서 List에 넣을 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">public class RetrofitPresenter &#123;</div><div class="line">    private View view;</div><div class="line"></div><div class="line">    private User user;</div><div class="line">    private List&lt;User&gt; userList;</div><div class="line"></div><div class="line">    // Constructor</div><div class="line">    public RetrofitPresenter(View view) &#123;</div><div class="line">        this.view = view;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Search One User and Show View</div><div class="line">    public void updateUser(String name) &#123;</div><div class="line">        Log.e(&quot;[Client]&quot;, &quot;Too many request?&quot;);</div><div class="line">        RetrofitHelper.getInstance().getUser(name).enqueue(new Callback&lt;User&gt;() &#123;</div><div class="line">            @Override</div><div class="line">            public void onResponse(@NonNull Call&lt;User&gt; call, @NonNull Response&lt;User&gt; response) &#123;</div><div class="line">                if (response.code() == 200 &amp;&amp; response.body() != null) &#123;</div><div class="line">                    user = response.body();</div><div class="line">                    view.updateTextView(user.toString());</div><div class="line">                &#125; else &#123;</div><div class="line">                    onFailure(call, new Throwable(&quot;may be response something but error&quot;));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void onFailure(@NonNull Call&lt;User&gt; call, @NonNull Throwable t) &#123;</div><div class="line">                Log.e(&quot;[Server]&quot;, t.getLocalizedMessage());</div><div class="line">                view.updateTextView(&quot;Error! at Search One&quot;);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Search User List and Show View</div><div class="line">    public void updateUserList() &#123;</div><div class="line">        RetrofitHelper.getInstance().getUserList().enqueue(new Callback&lt;Users&gt;() &#123;</div><div class="line">            @Override</div><div class="line">            public void onResponse(@NonNull Call&lt;Users&gt; call, @NonNull Response&lt;Users&gt; response) &#123;</div><div class="line">                if (response.code() == 200 &amp;&amp; response.body().users != null) &#123;</div><div class="line">                    userList = response.body().users;</div><div class="line">                    // 임시로 2번 째 사람의 이름만 출력해보자</div><div class="line">                    view.updateTextView(userList.get(1).getName());</div><div class="line">                &#125; else &#123;</div><div class="line">                    onFailure(call, new Throwable(&quot;may be response something but error&quot;));</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void onFailure(@NonNull Call&lt;Users&gt; call, @NonNull Throwable t) &#123;</div><div class="line">                Log.e(&quot;[Server]&quot;, t.getLocalizedMessage());</div><div class="line">                view.updateTextView(&quot;Error! at Search List&quot;);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public interface View &#123;</div><div class="line">        void updateTextView(String text);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Retrofit-REST-API-Android-후기"><a href="#Retrofit-REST-API-Android-후기" class="headerlink" title="Retrofit REST API Android 후기"></a><strong>Retrofit REST API Android 후기</strong></h2><ul>
<li>이번에 해커톤 대회에서 새로 배워온 내용이라 써보면서 편하다고 느꼇고, 글만 봐서는 어떤 내용인지 잘 모를 것 같고 한번 써보면 쉽게 사용 할 수 있는 좋은 라이브러리 인 것 같다.</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-05-18T05:17:51.000Z"><a href="/2017/05/18/MVP-Pattern-Android/">2017-05-18</a></time>
      
      
  
    <h1 class="title"><a href="/2017/05/18/MVP-Pattern-Android/">MVP-Pattern-Android</a></h1>
  

    </header>
    <div class="entry">
      
        <p>MVP Pattern 이란 MVC 아키텍처 패턴에서 파생된 것으로 User Interface를 작성하는데 사용된다. MVP는 (Model-View-Presenter)의 약자이다. 기존에 작성했던 소스를 예시로 MVP Pattern의 예시를 들어보려고 한다. 소스코드는 링크를 첨부한다. <a href="https://github.com/clucle/Android/tree/master/MVP_pattern_tutor" target="_blank" rel="external">source</a></p>
<h1 id="MVP-Pattern-flow"><a href="#MVP-Pattern-flow" class="headerlink" title="MVP Pattern flow"></a>MVP Pattern flow</h1><p><img src="https://cloud.githubusercontent.com/assets/8114204/26189814/76086bd8-3be1-11e7-8ba4-ca693fe8c189.png" alt="flow"></p>
<p>위의 그림을 토대로 설명을 해보겠다.</p>
<h3 id="View"><a href="#View" class="headerlink" title="View"></a>View</h3><p>MVP Pattern에서 View란 activity 혹은 Fragment 에서 사용자가 보고있는 화면을 의미한다. View를 보는 사용자는 굳이 내부에서 실행 될 로직이나, 변수에는 전혀 의존성 없이 할 행동만 있으면 된다.</p>
<h3 id="Presenter"><a href="#Presenter" class="headerlink" title="Presenter"></a>Presenter</h3><p>Presenter 란 View와 Model 사이를 연결해주는 곳이다. View에서 User의 Action이 들어오면 데이터에 의존성이 있다면 데이터를 수정하고 없다면 데이터를 수정 하지 않는다. User Action 에 맞는 Method를 실행하고 View에 모든 명령을 다 처리 한 후 사용자에게 보여질 View를 udpate 해준다.</p>
<h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><p>Model 이란 사용자 저장되어 있는 정보가 필요 할 때 사용한다. 예를 들면 사람 정보를 저장한다고 하면, 사람에 관한 데이터를 DB로 저장하던지 Local 변수로 저장 할 것이다.</p>
<h1 id="Simple-source"><a href="#Simple-source" class="headerlink" title="Simple source"></a>Simple source</h1><p>이 소스는 View에서 사용자의 입력을 받아 Model(user) 에 이름을 저장하는 간단한 예제이다.</p>
<h3 id="Presenter-1"><a href="#Presenter-1" class="headerlink" title="Presenter"></a>Presenter</h3><p>Presenter 부터 살펴보자. Presenter 는 Model과 View 모두 연결 되있다. <strong>Presenter에 View라는 interface를 만들어두고 View에서 Presenter.View를 implements 하는 것으로 View에서 rendering 될 View에대한 Method를 override할 의무를 준다.</strong> updateName 은 View에서 사용자가 요청할 Method이고 요청이 들어오면 Model에 데이터를 저장하고 View에 update를 요청한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">public class MainPresenter &#123;</div><div class="line">    private User user;</div><div class="line">    private View view;</div><div class="line"></div><div class="line">    public MainPresenter(View view) &#123;</div><div class="line">        this.view = view;</div><div class="line">        user = new User();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void updateName(String name) &#123;</div><div class="line">        user.setName(name);</div><div class="line">        view.updateUserInfoTextView(user.toString());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public interface View &#123;</div><div class="line">        void updateUserInfoTextView(String info);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Model-1"><a href="#Model-1" class="headerlink" title="Model"></a>Model</h3><p>Model 에서는 사용자가 필요한 정보를 저장할 class가 필요하다<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public class User &#123;</div><div class="line"></div><div class="line">    private String name;</div><div class="line"></div><div class="line">    public void setName(String name) &#123;</div><div class="line">        this.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return &quot;Name : &quot; + name;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="View-1"><a href="#View-1" class="headerlink" title="View"></a>View</h3><p>View 에서는 Presenter의 View를 implements받아 View에서 사용해야 하는 Method를 override 한다. onCreate시 presenter를 등록 해 주고, 사용자의 행동은 Presenter로 보내준다. 여기에서는 text가 변경 될 때 Presenter에 사용자의 행동을 보낸다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">public class MainActivity extends AppCompatActivity implements MainPresenter.View&#123;</div><div class="line"></div><div class="line">    private MainPresenter mainPresenter;</div><div class="line"></div><div class="line">    private TextView userInfoTextView;</div><div class="line">    private EditText name;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        mainPresenter = new MainPresenter(this);</div><div class="line"></div><div class="line">        userInfoTextView = (TextView) findViewById(R.id.userInfo);</div><div class="line">        name = (EditText) findViewById(R.id.name);</div><div class="line"></div><div class="line">        name.addTextChangedListener(new TextWatcher() &#123;</div><div class="line">            @Override</div><div class="line">            public void beforeTextChanged(CharSequence s, int start, int count, int after) &#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void onTextChanged(CharSequence s, int start, int before, int count) &#123;</div><div class="line">                mainPresenter.updateName(s.toString());</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void afterTextChanged(Editable s) &#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void updateUserInfoTextView(String info) &#123;</div><div class="line">        userInfoTextView.setText(info);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="MVP-Pattern-후기"><a href="#MVP-Pattern-후기" class="headerlink" title="MVP-Pattern 후기"></a>MVP-Pattern 후기</h2><ul>
<li><p>사용자 입장과 개발자 입장을 나누어서 볼 수 있다는 점이 편한 것 같다.</p>
</li>
<li><p>다른 여러 디자인 패턴에 대한 정보도 궁금하다.</p>
</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-05-10T16:18:14.000Z"><a href="/2017/05/11/data-binding-butterknife/">2017-05-11</a></time>
      
      
  
    <h1 class="title"><a href="/2017/05/11/data-binding-butterknife/">Data Binding? ButterKnife? 뭐하는 거에요?</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Data Binding과 ButterKnife, 안드로이드를 처음 접하는 사람에겐 생소한 이름일 것이다. Data Binding과 ButterKnife 안드로이드에서 데이터 바인딩를 도와주는 library이다. <strong>안드로이드에서 데이터 바인딩이란 무엇일까? 바로 UI와 데이터간을 서로 연결하는 프로세스이다.</strong> 그렇다면 왜 이러한 라이브러리를 사용하는 것일까? <strong>아래 라이브러리를 사용하지 않았을 때와 그렇지 않을 때의 차이점을 간단하게 살펴보자.</strong></p>
<h1 id="데이터-바인딩을-사용하지-않았을-경우"><a href="#데이터-바인딩을-사용하지-않았을-경우" class="headerlink" title="데이터 바인딩을 사용하지 않았을 경우"></a><strong>데이터 바인딩을 사용하지 않았을 경우</strong></h1><p>라이브러리를 사용하지 않았을 때의 코드를 살펴보자. 아래 예시는 안드로이드에 처음 접할 때 만들었던 소스 중 일부를 첨부한다. <a href="https://github.com/clucle/COFFEEMANAGER" target="_blank" rel="external">source</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">// xml 소스 중 일부</div><div class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"0px"</span></div><div class="line">    <span class="attr">android:layout_weight</span>=<span class="string">"38"</span></div><div class="line">    <span class="attr">android:background</span>=<span class="string">"#8B4513"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">    <span class="attr">android:paddingBottom</span>=<span class="string">"2dp"</span></div><div class="line">    <span class="attr">android:paddingLeft</span>=<span class="string">"16dp"</span></div><div class="line">    <span class="attr">android:paddingRight</span>=<span class="string">"16dp"</span></div><div class="line">    <span class="attr">android:paddingTop</span>=<span class="string">"2dp"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/btn_add"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_alignParentStart</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"4dp"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"Add"</span></div><div class="line">        <span class="attr">android:textStyle</span>=<span class="string">"bold"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/btn_del"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_alignParentEnd</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_marginRight</span>=<span class="string">"4dp"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"Del"</span></div><div class="line">        <span class="attr">android:textStyle</span>=<span class="string">"bold"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_centerHorizontal</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:layout_centerVertical</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"Select Coffee"</span></div><div class="line">        <span class="attr">android:textSize</span>=<span class="string">"18dp"</span></div><div class="line">        <span class="attr">android:textStyle</span>=<span class="string">"bold"</span> /&gt;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">//  activity 소스 중 일부</div><div class="line">Button btnReset;</div><div class="line">Button btnAdd;</div><div class="line">Button btnDel;</div><div class="line"></div><div class="line">@Override</div><div class="line">protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">    super.onCreate(savedInstanceState);</div><div class="line">    <span class="built_in">set</span>ContentView(R.layout.your_view);</div><div class="line"></div><div class="line">    btnReset = findViewById(R.id.btn_reset);</div><div class="line">    btnAdd = findViewById(R.id.btn_add);</div><div class="line">    btnDel = findViewById(R.id.btn_del);</div><div class="line"></div><div class="line">    btnReset.setOnClickListener(mClickListener);</div><div class="line">    btnAdd.setOnClickListener(mClickListener);</div><div class="line">    btnDel.setOnClickListener(mClickListener);</div><div class="line">&#125;</div><div class="line"></div><div class="line">Button.OnClickListener mClickListener = new View.<span class="function"><span class="title">OnClickListener</span></span>() &#123;</div><div class="line">    @Override</div><div class="line">    public void onClick(View v) &#123;</div><div class="line">        //pass</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>소스를 보기만 해도 답답하다. class 내부에서 변수를 선언해주고 id를 가져와서 연결해주고 listener를 연결한다. 하나의 element마다 3줄을 써야되는 것이다. 그렇다면 이와 같은 것을 제거하기 위해 라이브러리를 사용한다면 어떻게 될까?</p>
<p>-<br>-</p>
<h1 id="ButterKnife를-사용하였을-경우"><a href="#ButterKnife를-사용하였을-경우" class="headerlink" title="ButterKnife를 사용하였을 경우"></a><strong>ButterKnife를 사용하였을 경우</strong></h1><p>이 글의 작성 시점 2017-05-11 에는 버터나이프보다 Data Binding이 좀 더 좋은 평을 얻고있다. android 자체적으로 지원하는 라이브러리에 Data Binding이 추가되어 있는 상태이다.</p>
<p>ButterKnife로 소스를 간결하게 하는 법을 소개한다. 사용하는 소스는 ButterKnife 공식 홈페이지 <a href="http://jakewharton.github.io/butterknife/" target="_blank" rel="external">ButterKnife</a>을 참고하자.</p>
<h1 id="1-gradle-setting"><a href="#1-gradle-setting" class="headerlink" title="1. gradle setting"></a>1. gradle setting</h1><ul>
<li>app의 build.gradle에 다음 소스를 추가한다. 우리가 주목해야 하는 부분은 아래와 같다.<blockquote>
<p>apply plugin: ‘android-apt’<br>compile ‘com.jakewharton:butterknife:8.5.1’<br>apt ‘com.jakewharton:butterknife-compiler:8.5.1’ testCompile ‘junit:junit:4.12’</p>
</blockquote>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">// app\build.gradle 중 일부</div><div class="line">apply plugin: <span class="string">'android-apt'</span></div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    compile fileTree(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</div><div class="line">    androidTestCompile(<span class="string">'com.android.support.test.espresso:espresso-core:2.2.2'</span>, &#123;</div><div class="line">        exclude group: <span class="string">'com.android.support'</span>, module: <span class="string">'support-annotations'</span></div><div class="line">    &#125;)</div><div class="line">    compile <span class="string">'com.android.support:appcompat-v7:25.3.1'</span></div><div class="line">    compile <span class="string">'com.android.support.constraint:constraint-layout:1.0.2'</span></div><div class="line">    compile <span class="string">'com.jakewharton:butterknife:8.5.1'</span></div><div class="line">    apt <span class="string">'com.jakewharton:butterknife-compiler:8.5.1'</span></div><div class="line">    <span class="built_in">test</span>Compile <span class="string">'junit:junit:4.12'</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>project의 build.gradle에 다음 소스를 추가한다. 우리가 주목해야 할 부분은 아래와 같다.<blockquote>
<p>classpath ‘com.neenbedankt.gradle.plugins:android-apt:1.8’</p>
</blockquote>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// build.gradle 중 일부</div><div class="line">buildscript &#123;</div><div class="line">    repositories &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">    dependencies &#123;</div><div class="line">        classpath <span class="string">'com.android.tools.build:gradle:2.3.1'</span></div><div class="line">        classpath <span class="string">'com.neenbedankt.gradle.plugins:android-apt:1.8'</span></div><div class="line"></div><div class="line">        // NOTE: Do not place your application dependencies here; they belong</div><div class="line">        // <span class="keyword">in</span> the individual module build.gradle files</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="2-example"><a href="#2-example" class="headerlink" title="2. example"></a>2. example</h1><p>아래 소스를 보면 <strong>ButterKnife.bind(this);</strong>라는 부분에서 지금 사용하는 <strong>Activity의 layout(xml)에 해당하는 부분을 바인딩하고 @BindView에서 id를 연결해 주는 모습이다.</strong> 이는 class 내부에서 사용할 때 변수 선언을 해주고 안드로이드의 생명 주기상 onCreate할 때 데이터를 바인딩 해줘야하는 <strong>두줄의 소스를 한줄로 줄이는 것으로 볼 수 있다.</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class ExampleActivity extends Activity &#123;</div><div class="line">  @BindView(R.id.title) TextView title;</div><div class="line">  @BindView(R.id.subtitle) TextView subtitle;</div><div class="line">  @BindView(R.id.footer) TextView footer;</div><div class="line"></div><div class="line">  @Override public void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">    super.onCreate(savedInstanceState);</div><div class="line">    <span class="built_in">set</span>ContentView(R.layout.simple_activity);</div><div class="line">    ButterKnife.bind(this);</div><div class="line">    // TODO Use fields...</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>아래와 같이 여러 view의 listener도 bind한번으로 가능하게 한다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@OnClick(&#123; R.id.door1, R.id.door2, R.id.door3 &#125;)</div><div class="line">public void pickDoor(DoorView door) &#123;</div><div class="line">  <span class="keyword">if</span> (door.hasPrizeBehind()) &#123;</div><div class="line">    Toast.makeText(this, <span class="string">"You win!"</span>, LENGTH_SHORT).show();</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    Toast.makeText(this, <span class="string">"Try again"</span>, LENGTH_SHORT).show();</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>-<br>-</p>
<h1 id="Data-Binding-사용하였을-경우"><a href="#Data-Binding-사용하였을-경우" class="headerlink" title="Data Binding 사용하였을 경우"></a><strong>Data Binding 사용하였을 경우</strong></h1><p>Data Binding은 AndroidSDK에서 지원하기 때문에 공식 API문서를 참고한다 <a href="https://developer.android.com/topic/libraries/data-binding/index.html?hl=ko" target="_blank" rel="external">Data Binding</a></p>
<h1 id="1-gradle-setting-1"><a href="#1-gradle-setting-1" class="headerlink" title="1. gradle setting"></a>1. gradle setting</h1><ul>
<li>app의 build.gradle에 다음 소스를 추가한다.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// app\build.gradle 중 일부</div><div class="line">android &#123;</div><div class="line">    ....</div><div class="line">    dataBinding &#123;</div><div class="line">        enabled = <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="2-example-1"><a href="#2-example-1" class="headerlink" title="2. example"></a>2. example</h1><p>아래 xml파일에서 기존 xml과 다른 부분을 찾자면 <strong><layout> tag</layout></strong>와 <strong><data> tag</data></strong>와 <strong>android:text=”@{user.firstName}”</strong> 이 될 것이다. Data Binding을 사용하기 위해서는 LinearLayout과 같은 사용자의 View를 <strong><layout></layout></strong>으로 감싸고 그 뒤에 data요소와 view요소를 추가한다. 레이아웃 내에서 <strong>@{}</strong>를 통해서 속성을 불러올 수 있다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">data</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">variable</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">type</span>=<span class="string">"com.example.User"</span>/&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">data</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">       <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">       <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">       <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line">       <span class="tag">&lt;<span class="name">TextView</span> <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></div><div class="line">           <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">           <span class="attr">android:text</span>=<span class="string">"@&#123;user.firstName&#125;"</span>/&gt;</div><div class="line">       <span class="tag">&lt;<span class="name">TextView</span> <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></div><div class="line">           <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">           <span class="attr">android:text</span>=<span class="string">"@&#123;user.lastName&#125;"</span>/&gt;</div><div class="line">   <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">public class User &#123;</div><div class="line">   public final String firstName;</div><div class="line">   public final String lastName;</div><div class="line">   public User(String firstName, String lastName) &#123;</div><div class="line">       this.firstName = firstName;</div><div class="line">       this.lastName = lastName;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>이제 activity에서 바인딩을 해주면 된다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">   super.onCreate(savedInstanceState);</div><div class="line">   MainActivityBinding binding = DataBindingUtil.setContentView(this, R.layout.main_activity);</div><div class="line">   User user = new User(<span class="string">"Test"</span>, <span class="string">"User"</span>);</div><div class="line">   binding.setUser(user);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>더 자세한 내용은 위에 링크한 안드로이드 공식 문서를 찾아보면 된다.</p>
<h2 id="Data-Binding-ButterKnife-후기"><a href="#Data-Binding-ButterKnife-후기" class="headerlink" title="Data Binding, ButterKnife 후기"></a><strong>Data Binding, ButterKnife 후기</strong></h2><ul>
<li><p>데이터 바인딩을 해주는 것으로 소스를 좀더 간결하게 사용 할 수 있다.</p>
</li>
<li><p>아직까지는 버터나이프를 사용하고 있는데, Data Binding도 익숙해지도록 노력해야겠다.</p>
</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-04-20T16:46:44.000Z"><a href="/2017/04/21/My-New-Post/">2017-04-21</a></time>
      
      
  
    <h1 class="title"><a href="/2017/04/21/My-New-Post/">Hexo를 이용한 GitHub Blog 만들기</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Hexo란 간편하게 만들 수 있는 블로그 프레임 워크다. 더 많은 정보는 공식 홈페이지 <a href="https://hexo.io/ko" target="_blank" rel="external">Hexo</a> 에서 볼 수 있다. Hexo로 블로그를 만드는 방법을 소개 하려 글을 쓴다. Hexo를 사용해서 깃에 블로그를 만들기 위해서는 <a href="https://github.com/" target="_blank" rel="external">github</a> 계정이 있어야 하고, <a href="https://nodejs.org/ko/" target="_blank" rel="external">node</a>가 깔려한다. 링크를 타고 가서 nodejs를 다운받을 수 있다.</p>
<h3 id="github-Repository-만들기"><a href="#github-Repository-만들기" class="headerlink" title="github Repository 만들기"></a>github Repository 만들기</h3><p>GitHub 에서는 GitHub Repository에서 웹을 호스팅 할수 있는 기능을 제공 한다. 더 많은 정보는 공식 홈페이지 <a href="https://pages.github.com/" target="_blank" rel="external">GitHub Pages</a> 에서 볼 수 있다. 우선 Repository를 만들어야 한다. 이미 주소가 있기 때문에 빨간 경고창이 나오지만 처음이라면 경고창이 나오지 않을테니 [username].github.io 로 Repository로 만들면 된다. Public, Private는 블로그에는 영향을 주지 않는다. 이제 Create repository를 눌러서 Repository를 생성한다.<br><img src="./fancybox/images/Make-Github-Blog-Hexo/img_make_repo.png" alt="make_repo"></p>
<h3 id="Hexo-설치"><a href="#Hexo-설치" class="headerlink" title="Hexo 설치"></a>Hexo 설치</h3><p>Hexo를 설치하기 위해 윈도우에서는 <a href="https://git-for-windows.github.io/" target="_blank" rel="external">Git</a> 에서 다운받을 수 있는 GitBash를 사용할 것이다. 링크 한 홈페이지에 들어가서 Download를 하고 끝가지 설치 하면 GitBash가 깔릴 것이다. 아래는 gitbash 화면이다.<br><img src="./fancybox/images/Make-Github-Blog-Hexo/img_gitbash.png" alt="gitbash"></p>
<p>이제 hexo를 다음 명령어를 입력해서 설치한다. git bash에서 가만히 멈춰 있는 것 처럼 보여도 다운받는 과정이다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g hexo-cli</div></pre></td></tr></table></figure></p>
<p>아래는 설치가 완료된 모습이다.<br><img src="./fancybox/images/Make-Github-Blog-Hexo/img_npm_install_hexo.png" alt="install_hexo"></p>
<p>이제 다운받은 hexo를 이용해서 블로그의 내용이 담길 폴더를 생성하고 초기화 해준다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo init (your_blog_name)</div></pre></td></tr></table></figure></p>
<p>아래는 초기화가 완료된 모습이다.<br><img src="./fancybox/images/Make-Github-Blog-Hexo/img_hexo_init.png" alt="init_hexo"></p>
<p>hexo init 까지 마치면 명령을 실행한 폴더 안에 (your_blog_name) 이라는 폴더가 생긴다. 이 폴더에 들어가서 로컬에서 hexo가 어떻게 보여지는지 확인 할 수 있다. hexo server를 실행 후 localhost:4000 으로 들어가서 확인해보자.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> your_blog_name</div><div class="line">$ hexo server</div></pre></td></tr></table></figure></p>
<p><img src="./fancybox/images/Make-Github-Blog-Hexo/img_hexo_server.png" alt="hexo_server"></p>
<h3 id="Deploy-설정하기"><a href="#Deploy-설정하기" class="headerlink" title="Deploy 설정하기"></a>Deploy 설정하기</h3><p>Deployt란 배포를 뜻하고 방금 로컬에서 테스트한 서버를 github 블로그에 들어갔을 때 보여지게 하는 과정이다. Hexo에서는 Deploy기능을 제공해 주는데 우리는 위에서 만든 github Repository 주소를 지정해주면 Deploy시 자동으로 commit 과 push가 되면서 블로그가 갱신된다. 그래서 개인 설정을 해야하는데 개인 설정은 (your_blog_name)의 _config.yml 을 수정하면 된다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vi _config.yml</div></pre></td></tr></table></figure></p>
<p>우리가 수정할 부분은 #Site, #URL, #Deployment 이다.</p>
<p>#Site 에서는 title에 블로그 제목, subtitle에 문구, description에 설명, author에 이름, language에 언어를 적어준다. 이 부분은 홈페이지에 보이는 내용들을 수정 할 수 있다.</p>
<p>#URL 에서는 url 부분을 github Repository의 git 주소를 적어둔다 <a href="https://github.com/[username]/[username].github.io.git" target="_blank" rel="external">https://github.com/[username]/[username].github.io.git</a></p>
<p><img src="./fancybox/images/Make-Github-Blog-Hexo/img_hexo_config1.png" alt="config1"></p>
<p>#Deployment 에서는 github주소와 어떤 브랜치에 올릴지 정하는데 우린 master브랜치로 하면 된다.<br><img src="./fancybox/images/Make-Github-Blog-Hexo/img_hexo_config2.png" alt="config2"></p>
<h3 id="GitHub에-Deploy하기"><a href="#GitHub에-Deploy하기" class="headerlink" title="GitHub에 Deploy하기"></a>GitHub에 Deploy하기</h3><p>이제 설정은 마쳤고 github에 배포만 해주면 된다. 배포를 하기 위해서 hexo-deploy-git을 설치한다. 작업하고 있던 (your_blog_name) 폴더 안에서 명령어를 실행한다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install --save hexo-deployer-git</div></pre></td></tr></table></figure></p>
<p>설치를 마친 후 배포하는 명령을 실행한다.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div><div class="line">$ hexo deploy</div></pre></td></tr></table></figure></p>
<p>deploy 후 [username].github.io 에 들어가면 GitHub Blog가 완성된다.</p>
<h3 id="Hexo-후기"><a href="#Hexo-후기" class="headerlink" title="Hexo 후기"></a>Hexo 후기</h3><ul>
<li><p>블로그 포스팅은 github에 저장 되지만 블로그 내용을 담고 있는 폴더 (your_blog_name) 을 따로 관리해 주어야 한다.</p>
</li>
<li><p>블로그 테마 바꾸는 법은 후에 포스팅 하겠다.</p>
</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-04-20T05:45:41.170Z"><a href="/2017/04/20/hello-world/">2017-04-20</a></time>
      
      
  
    <h1 class="title"><a href="/2017/04/20/hello-world/">Hello World</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Suche">
    <input type="hidden" name="q" value="site:clucle.github.io">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Hexo/">Hexo</a><small>1</small></li>
  
    <li><a href="/tags/android/">android</a><small>3</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2017 Dujin Jung
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
